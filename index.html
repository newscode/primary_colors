<html>
<head>
	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.4/leaflet.css" />
	<!--[if lte IE 8]><link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.4/leaflet.ie.css" /><![endif]-->
	
	<script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
	<script src="http://cdn.leafletjs.com/leaflet-0.4/leaflet.js"></script>
	
	<style type="text/css">
		#map { 
			height: 100%;
			width: 80%;
		 }
	</style>

	<script type="text/javascript" src="data.js"></script>
	<script type="text/javascript" src="coords.js"></script>
	<script type="text/javascript">

		var map;
		var defaultCenter = [31.78, 35.2];
		var pg;

		function initMap() {
			map = L.map('map').setView(defaultCenter, 8);
			L.tileLayer(
				'http://{s}.tile.cloudmade.com/e4910e4f5be44f368ff0ac65fdf528ba/{styleId}/256/{z}/{x}/{y}.png',
				{
					attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://cloudmade.com">CloudMade</a>',
					maxZoom: 18,
					styleId: 998
				}
			).addTo(map);
		}

		function addMarker(city) {
			L.marker(city.coords).addTo(map)
							.bindPopup(city.score + ' : ' + 'ציון ' + city.name)
							.on({
									'mouseover': function() { this.openPopup(); }
								});
		}

		function add_outline(city) {
			L.polygon(coords[city.id], {weight: 2})
							.addTo(map)
							.bindPopup(city.score + ' : ' + 'ציון ' + city.name)
							.on({
									'mouseover': function() { this.openPopup(); }
								});

		}

		$(document).ready(function() {
			initMap();	
			
			for (var i in data) {
				add_outline(data[i]);
			}

		});
	</script>

</head>

<body>
	<div id="map"></div>
</body>
</html>